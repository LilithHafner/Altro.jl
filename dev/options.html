<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Solver Options · Altro</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Altro</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><a class="tocitem" href="quickstart.html">Getting Started</a></li><li class="is-active"><a class="tocitem" href="options.html">Solver Options</a><ul class="internal"><li><a class="tocitem" href="#Solver-Statistics"><span>Solver Statistics</span></a></li><li><a class="tocitem" href="#Solver-Options-2"><span>Solver Options</span></a></li><li><a class="tocitem" href="#List-of-Options"><span>List of Options</span></a></li></ul></li><li><a class="tocitem" href="advanced.html">Advanced Options</a></li><li><a class="tocitem" href="api.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="options.html">Solver Options</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="options.html">Solver Options</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/RoboticExplorationLab/Altro.jl/blob/master/docs/src/options.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Solver-Options"><a class="docs-heading-anchor" href="#Solver-Options">Solver Options</a><a id="Solver-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Solver-Options" title="Permalink"></a></h1><ul><li><a href="options.html#Solver-Options">Solver Options</a></li><ul><li><a href="options.html#Solver-Statistics">Solver Statistics</a></li><li><a href="options.html#Solver-Options-2">Solver Options</a></li><li><a href="options.html#List-of-Options">List of Options</a></li></ul></ul><h2 id="Solver-Statistics"><a class="docs-heading-anchor" href="#Solver-Statistics">Solver Statistics</a><a id="Solver-Statistics-1"></a><a class="docs-heading-anchor-permalink" href="#Solver-Statistics" title="Permalink"></a></h2><p>ALTRO logs intermediate values during the course of the solve. These values are all stored in the <code>SolverStats</code> type, accessible via <code>solver.stats</code> or <code>Altro.stats(solver)</code>. This currently stores the following information:</p><table><tr><th style="text-align: right">Field</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>iterations</code></td><td style="text-align: right">Total number of iterations</td></tr><tr><td style="text-align: right"><code>iterations_outer</code></td><td style="text-align: right">Number of outer loop (Augmented Lagrangian) iterations</td></tr><tr><td style="text-align: right"><code>iterations_pn</code></td><td style="text-align: right">Number of projected newton iterations</td></tr><tr><td style="text-align: right"><code>iteration</code></td><td style="text-align: right">Vector of iteration number</td></tr><tr><td style="text-align: right"><code>iteration_outer</code></td><td style="text-align: right">Vector of outer loop iteration number</td></tr><tr><td style="text-align: right"><code>cost</code></td><td style="text-align: right">Vector of costs</td></tr><tr><td style="text-align: right"><code>dJ</code></td><td style="text-align: right">Change in cost</td></tr><tr><td style="text-align: right"><code>c_max</code></td><td style="text-align: right">Maximum constrained violation</td></tr><tr><td style="text-align: right"><code>gradient</code></td><td style="text-align: right">Approximation of dual optimality residual (2-norm of gradient of the Lagrangian)</td></tr><tr><td style="text-align: right"><code>penalty_max</code></td><td style="text-align: right">Maximum penalty parameter</td></tr></table><p>The other fields are used interally by the solver and not important to the end user.</p><p>The vector fields of the <code>SolverStats</code> type can be converted to a dictionary via <code>Dict(stats::SolverStats)</code>, which can then be cast into a tabular format such as <code>DataFrame</code> from DataFrames.jl.</p><h2 id="Solver-Options-2"><a class="docs-heading-anchor" href="#Solver-Options-2">Solver Options</a><a class="docs-heading-anchor-permalink" href="#Solver-Options-2" title="Permalink"></a></h2><p>Like any nonlinear programming solver, ALTRO comes with a host of solver options. While the default values yield good/acceptable performance on many problem, extra performance can always be gained by tuning these parameters. In practice, there are only a few parameters that need to be tuned. See the <a href="https://bjack205.github.io/papers/AL_iLQR_Tutorial.pdf">AL-iLQR Tutorial</a> for more details.</p><p>The ALTRO solver is actually a composition of several different solvers with their own options. Early versions of Altro.jl required the user to manipulate a rather confusing heirarchy of solver options. Newer versions of Altro.jl provide a single options struct that dramatically simplifies setting and working with the solver parameters.</p><h3 id="Setting-Solver-Options"><a class="docs-heading-anchor" href="#Setting-Solver-Options">Setting Solver Options</a><a id="Setting-Solver-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-Solver-Options" title="Permalink"></a></h3><p>Solver options can be specified when the solver is instantiated or afterwards using  the <code>set_options!</code> command. If we have a previously constructed <code>Problem</code>, this looks like</p><pre><code class="language-julia">solver = ALTROSolver(prob, verbose=1, constraint_tolerance=1e-3, square_root=true)</code></pre><p>Alternatively, solver options can be set using the <code>set_options!</code> command after the solver has been instantiated:</p><pre><code class="language-julia">set_options!(solver, reset_duals=true, penalty_initial=100, penalty_scaling=50)</code></pre><h3 id="Querying-Solver-Options"><a class="docs-heading-anchor" href="#Querying-Solver-Options">Querying Solver Options</a><a id="Querying-Solver-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Querying-Solver-Options" title="Permalink"></a></h3><p>The options struct for the <code>ALTROSolver</code> can be directly accessed via <code>solver.opts</code> or <code>Altro.options(solver)</code>. Options can be directly set or retrieved from this mutable struct.</p><h2 id="List-of-Options"><a class="docs-heading-anchor" href="#List-of-Options">List of Options</a><a id="List-of-Options-1"></a><a class="docs-heading-anchor-permalink" href="#List-of-Options" title="Permalink"></a></h2><p>For convenience, we provide a list of options in the ALTRO solver, along with a brief description:</p><table><tr><th style="text-align: right">Option</th><th style="text-align: right">Description</th><th style="text-align: right">Importance</th><th style="text-align: right">Default</th></tr><tr><td style="text-align: right"><code>constraint_tolerance</code></td><td style="text-align: right">All constraint violations must be below this value.</td><td style="text-align: right">High</td><td style="text-align: right"><code>1e-6</code></td></tr><tr><td style="text-align: right"><code>cost_tolerance</code></td><td style="text-align: right">The difference in costs between subsequent iterations must be below this value.</td><td style="text-align: right">High</td><td style="text-align: right"><code>1e-4</code></td></tr><tr><td style="text-align: right"><code>cost_tolerance_intermediate</code></td><td style="text-align: right">Cost tolerance for intermediate iLQR solves. Can speed up convergence by increase to 10-100x the <code>cost_tolerance</code>.</td><td style="text-align: right">Med</td><td style="text-align: right"><code>1e-4</code></td></tr><tr><td style="text-align: right"><code>gradient_tolerance</code></td><td style="text-align: right">Tolerance for 2-norm of primal optimality residual.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1</code></td></tr><tr><td style="text-align: right"><code>gradient_tolerance_intermediate</code></td><td style="text-align: right">Primal optimality residual tolerance for intermediate solve.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>10</code></td></tr><tr><td style="text-align: right"><code>iterations_inner</code></td><td style="text-align: right">Max iLQR iterations per iLQR solve.</td><td style="text-align: right">Med</td><td style="text-align: right"><code>300</code></td></tr><tr><td style="text-align: right"><code>dJ_counter_limit</code></td><td style="text-align: right">Max number of times iLQR can fail to make progress before exiting.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>10</code></td></tr><tr><td style="text-align: right"><code>square_root</code></td><td style="text-align: right">Enable the square root backward pass for improved numerical conditioning (WIP).</td><td style="text-align: right">Med</td><td style="text-align: right"><code>false</code></td></tr><tr><td style="text-align: right"><code>line_search_lower_bound</code></td><td style="text-align: right">Lower bound for Armijo line search.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e-8</code></td></tr><tr><td style="text-align: right"><code>line_search_upper_bound</code></td><td style="text-align: right">Upper bound for Armijo line search.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>10.0</code></td></tr><tr><td style="text-align: right"><code>iterations_linesearch</code></td><td style="text-align: right">Max number of backtracking steps in iLQR line search</td><td style="text-align: right">Low</td><td style="text-align: right">20</td></tr><tr><td style="text-align: right"><code>max_cost_value</code></td><td style="text-align: right">Maximum cost value. Will terminate solve if cost exeeds this limit.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e8</code></td></tr><tr><td style="text-align: right"><code>max_state_value</code></td><td style="text-align: right">Maximum value of any state. Will terminate solve if any state exeeds this limit.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e8</code></td></tr><tr><td style="text-align: right"><code>max_control_value</code></td><td style="text-align: right">Maximum value of any control. Will terminate solve if any control exeeds this limit.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e8</code></td></tr><tr><td style="text-align: right"><code>static_bp</code></td><td style="text-align: right">Enable the static backward pass. Only advisable for state + control dimensions &lt; 20. Turn off if compile time is exessive.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>true</code></td></tr><tr><td style="text-align: right"><code>save_S</code></td><td style="text-align: right">Save the intermediate cost-to-go expansions in the iLQR backward pass.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>false</code></td></tr><tr><td style="text-align: right"><code>bp_reg</code></td><td style="text-align: right">Enable iLQR backward pass regularization (WIP).</td><td style="text-align: right">Med</td><td style="text-align: right"><code>false</code></td></tr><tr><td style="text-align: right"><code>bp_reg_initial</code></td><td style="text-align: right">Initial backward pass regularization.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>0.0</code></td></tr><tr><td style="text-align: right"><code>bp_reg_increase_factor</code></td><td style="text-align: right">Multiplicative factor by which the regularization is increased.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1.6</code></td></tr><tr><td style="text-align: right"><code>bp_reg_max</code></td><td style="text-align: right">Maximum regularization.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e8</code></td></tr><tr><td style="text-align: right"><code>bp_reg_min</code></td><td style="text-align: right">Minimum regularization.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e-8</code></td></tr><tr><td style="text-align: right"><code>bp_reg_fp</code></td><td style="text-align: right">Amount of regularization added when foward pass fails</td><td style="text-align: right">Low</td><td style="text-align: right"><code>10.0</code></td></tr><tr><td style="text-align: right"><code>penalty_initial</code></td><td style="text-align: right">Initial penalty term on all constraints. Set low if the unconstrained solution is a good approximate solution to the constrained problem, and high if the initial guess provided is a good esimate. If <code>NaN</code> uses values in each constraint param, which defaults to <code>1.0</code>.</td><td style="text-align: right"><code>Very High</code></td><td style="text-align: right"><code>NaN</code></td></tr><tr><td style="text-align: right"><code>penalty_scaling</code></td><td style="text-align: right">Multiplicative factor by which the penalty is increased each outer loop iteration. High values can speed up convergence but quickly lead to poor numerical conditioning on difficult problems. Start with small values and then increase.If <code>NaN</code> defaults to <code>10</code> in the per-constraint parameter.</td><td style="text-align: right"><code>Very High</code></td><td style="text-align: right"><code>NaN</code></td></tr><tr><td style="text-align: right"><code>iterations_outer</code></td><td style="text-align: right">Max number of outer loop (Augmented Lagrangian) iterations.</td><td style="text-align: right">Med</td><td style="text-align: right"><code>30</code></td></tr><tr><td style="text-align: right"><code>verbose_pn</code></td><td style="text-align: right">Turn on printing in the projected newton solver.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>false</code></td></tr><tr><td style="text-align: right"><code>n_steps</code></td><td style="text-align: right">Maximum number of projected newton steps.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>2</code></td></tr><tr><td style="text-align: right"><code>projected_newton_tolerance</code></td><td style="text-align: right">Constraint tolerance at which the solver will exit the Augmented Lagrangian solve and start the projected newton solve. Typically <code>sqrt(constraint_tolerance)</code></td><td style="text-align: right">High</td><td style="text-align: right"><code>1e-3</code></td></tr><tr><td style="text-align: right"><code>active_set_tolerance_pn</code></td><td style="text-align: right">Tolerance for the active constraints during the projected newton solve. Includes some barely satisfied constraints into the active set. Can fix singularity issues during projected newton solve.</td><td style="text-align: right">Med</td><td style="text-align: right"><code>1e-3</code></td></tr><tr><td style="text-align: right"><code>multiplier_projected</code></td><td style="text-align: right">Enable updating the dual variables during the projected newton solve. Also provides a calculation of the optimality residual in the stats output.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>true</code></td></tr><tr><td style="text-align: right"><code>ρ_chol</code></td><td style="text-align: right">Regularization on the projected newton Cholesky solve.</td><td style="text-align: right">Med</td><td style="text-align: right"><code>1e-2</code></td></tr><tr><td style="text-align: right"><code>ρ_primal</code></td><td style="text-align: right">Regularization on the primal variables during the projected newton solve. Required if cost Hessian is positive-semi-definite.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e-8</code></td></tr><tr><td style="text-align: right"><code>ρ_dual</code></td><td style="text-align: right">Regularization on the dual variables during the multiplier projection step.</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1e-8</code></td></tr><tr><td style="text-align: right"><code>r_threshold</code></td><td style="text-align: right">Improvement ratio threshold for projected newton solve. If the ratio of constraint violations between subsequent steps is less than this value, it will update the cost and constraint expansions</td><td style="text-align: right">Low</td><td style="text-align: right"><code>1.1</code></td></tr><tr><td style="text-align: right"><code>projected_newton</code></td><td style="text-align: right">Enable projected newton solve. If enabled, <code>projected_newton_solve</code> is used as the <code>constraint_tolerance</code> for the AL-iLQR solve. Projected newton solve is still a WIP and not very robust.</td><td style="text-align: right">High</td><td style="text-align: right"><code>true</code></td></tr><tr><td style="text-align: right"><code>iterations</code></td><td style="text-align: right">Max number of total iterations (iLQR + projected newton).</td><td style="text-align: right">Med</td><td style="text-align: right">1000</td></tr><tr><td style="text-align: right"><code>verbose</code></td><td style="text-align: right">Controls output during solve. <code>0</code> is zero output, <code>1</code> outputs AL iterations, and <code>2</code> outputs both AL and iLQR iterations</td><td style="text-align: right">Low</td><td style="text-align: right"><code>0</code></td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="quickstart.html">« Getting Started</a><a class="docs-footer-nextpage" href="advanced.html">Advanced Options »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 16 March 2021 14:16">Tuesday 16 March 2021</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
